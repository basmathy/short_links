# Short Links

Консольное приложение для сокращения ссылок и их последующего открытия.  
Проект представляет собой CLI-сервис коротких ссылок с авторизацией пользователя по UUID, ограничением по сроку жизни и количеству открытий.

Все данные хранятся **в памяти приложения** и сохраняются в файл при корректном завершении работы.

---

## Возможности

### Пользователи
- автоматическое создание пользователя при первом использовании
- вход по UUID с помощью команды `login <uuid>`
- выход из текущей учётной записи через `logout`

Каждая короткая ссылка привязывается к конкретному пользователю.  
Открывать короткую ссылку может **только её владелец**.

---

### Работа со ссылками
- сокращение длинных HTTP/HTTPS ссылок
- генерация коротких ссылок формата `clck.ru/XXXXXXXX`
- открытие оригинальной ссылки в браузере
- автоматическое удаление ссылок при:
  - истечении срока действия
  - превышении лимита открытий

---

## Команды

Все команды вводятся напрямую в консоль.

- `help` — показать список доступных команд
- `exit` или `quit` — выйти из программы (данные сохраняются)
- `login <uuid>` — войти по UUID
- `logout` — выйти из текущей учётной записи
- `http://...` или `https://...` — сократить длинную ссылку
- `clck.ru/XXXXXXXX` — открыть короткую ссылку (только владельцу)

---

## Логика работы

### Регистрация пользователя
Если пользователь не авторизован и вводит длинную ссылку, приложение автоматически:
- создаёт нового пользователя
- генерирует UUID
- привязывает создаваемую ссылку к этому UUID

UUID необходимо сохранить для последующих входов.

---

### Сокращение ссылки
При сокращении ссылки:
- используется исходный URL
- используется UUID пользователя
- данные объединяются и хэшируются алгоритмом SHA-256
- результат кодируется в Base62
- итоговый короткий код состоит из 8 символов

---

### Открытие ссылки
Перед открытием короткой ссылки выполняются проверки:
- пользователь авторизован
- ссылка существует в хранилище
- ссылка принадлежит текущему пользователю
- срок действия не истёк
- лимит открытий не превышен

Если браузер открыть не удалось, оригинальный URL выводится в консоль.

---

## Ограничения ссылок

Ограничения задаются в конфигурации приложения:

- срок жизни ссылки — 24 часа
- максимальное количество открытий — 20

При нарушении любого условия ссылка автоматически удаляется из хранилища.

---

## Структура проекта

- `cli` — разбор и обработка пользовательских команд
- `config` — конфигурация хранения и ограничений
- `data` — модели данных и in-memory хранилище
- `service` — генерация коротких кодов
- `Main` — точка входа в приложение

---

## Пример сценария

1. Пользователь запускает программу и видит приветственное сообщение.  
2. Вводит `help`, чтобы посмотреть список команд.  
3. Вводит длинную ссылку, например `https://example.com/page`.  
4. Приложение создаёт UUID и возвращает короткую ссылку `clck.ru/XXXXXXXX`.  
5. При следующем запуске пользователь входит через `login <uuid>`.  
6. Вводит короткую ссылку и открывает её в браузере.  
7. Завершает работу командой `exit`.

---

## Примечания

- UUID пользователя необходимо сохранять — без него доступ к созданным ссылкам невозможен
- короткие ссылки нельзя открывать от имени другого пользователя
